var lang=window.location.pathname.split('/')[1];$(document).ready(function(){function updateElementIndex(el,prefix,ndx,action){var id_regex,replacement;if(action=='add'){id_regex=new RegExp('-__prefix__-');replacement='-'+ndx+'-';}else{id_regex=new RegExp('('+prefix+'-\\d+-)');replacement=prefix+'-'+ndx+'-';}
if($(el).attr("for"))$(el).attr("for",$(el).attr("for").replace(id_regex,replacement));if(el.id)el.id=el.id.replace(id_regex,replacement);if(el.name)el.name=el.name.replace(id_regex,replacement);}
function deleteForm(btn,prefix){var formCount=parseInt($('#id_'+prefix+'-TOTAL_FORMS').val());$(btn).parents('.item').remove();var forms=$('.item').not(':first');$('#id_'+prefix+'-TOTAL_FORMS').val(forms.length);var i=0;for(formCount=forms.length;i<formCount;i++){$(forms.get(i)).children().children().children().children().children().each(function(){if($(this).attr('type')=='text')updateElementIndex(this,prefix,i,'del');});}
return false;}
function addForm(btn,prefix){var formCount=parseInt($('#id_'+prefix+'-TOTAL_FORMS').val());if(formCount<10){var row=$(".item:first").clone(false).get(0);$(row).removeClass('hide');$(row).removeAttr('id').hide().insertAfter(".item:last").slideDown(300);$(".errorlist",row).remove();$(row).children().children().children().removeClass("has-error");$(row).children().children().children().children().children().each(function(){updateElementIndex(this,prefix,formCount,'add');$(this).val("");});$(row).find(".delete").click(function(){return deleteForm(this,prefix);});$("#id_"+prefix+"-TOTAL_FORMS").val(formCount+1);}
else{alert("Sorry, you can only enter a maximum of ten items.");}
return false;}
$("#add-subcategory").click(function(){return addForm(this,"sub_category");});$(".delete").click(function(){var add_id=$($(this).data('addid')).val();if(add_id===undefined){return deleteForm(this,"sub_category");}else{return deleteCategory(add_id,deleteForm(this,"sub_category"));}});function deleteCategory(add_id,callback){csrfmiddlewaretoken=$("input[name]").val();$.ajax({type:'POST',url:'/'+lang+'/client/delete-post-subcategory/'+add_id+'/',data:{'csrfmiddlewaretoken':csrfmiddlewaretoken},dataType:'json',success:function(res){if(res.success=="success"){alert("Sub category deleted successfully");}
else{alert(res.error);}},error:function(xhr,status,error){console.log(error);},});}});$(document).on("submit","#post-category-form",function(event){if($('#id_name_en').val()==""){$("#id_name_en").addClass("custom-has-error")
return false}
for(i=0;i<10;i++){if($('#id_sub_category-'+i+'-name_en').val()==''){$('#id_sub_category-'+i+'-name_en').addClass("custom-has-error")
return false}}})